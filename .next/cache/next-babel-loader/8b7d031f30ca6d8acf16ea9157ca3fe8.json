{"ast":null,"code":"import _classCallCheck from \"C:/Users/NagatsuYuhei/next_app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:/Users/NagatsuYuhei/next_app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:/Users/NagatsuYuhei/next_app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:/Users/NagatsuYuhei/next_app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"C:/Users/NagatsuYuhei/next_app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"C:/Users/NagatsuYuhei/next_app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\NagatsuYuhei\\\\next_app\\\\components\\\\Traffic.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport { Container, Row, Col, Form, Button, Table, Modal } from 'react-bootstrap';\nimport { connect } from 'react-redux';\nimport firebase from \"firebase\";\nimport \"firebase/database\";\n\nvar Traffic = /*#__PURE__*/function (_Component) {\n  _inherits(Traffic, _Component);\n\n  var _super = _createSuper(Traffic);\n\n  function Traffic(props) {\n    var _this;\n\n    _classCallCheck(this, Traffic);\n\n    _this = _super.call(this, props);\n    var today = new Date();\n    var year = today.getFullYear();\n    var day = today.getMonth() + 1;\n    _this.state = {\n      show: false,\n      year: year,\n      month: day,\n      allMoney: 0,\n      data: []\n    };\n\n    _this.getFireData();\n\n    _this.onChangeYear = _this.onChangeYear.bind(_assertThisInitialized(_this));\n    _this.onChangeMonth = _this.onChangeMonth.bind(_assertThisInitialized(_this));\n    _this.onChangeMoney = _this.onChangeMoney.bind(_assertThisInitialized(_this));\n    _this.handleShow = _this.handleShow.bind(_assertThisInitialized(_this));\n    _this.handleClose = _this.handleClose.bind(_assertThisInitialized(_this));\n    _this.targetSum = _this.targetSum.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Traffic, [{\n    key: \"getFireData\",\n    value: function getFireData() {\n      // firebaseにアクセス \n      var db = firebase.database();\n      var ref = db.ref('t_traffic_in/' + this.props.userid + '/' + this.state.year + '/' + this.state.month + '/');\n      var self = this;\n      ref.on('value', function (snapshot) {\n        if (snapshot.val() != null) {\n          self.setState({\n            data: snapshot.val()\n          });\n        }\n      });\n    }\n  }, {\n    key: \"onChangeYear\",\n    value: function onChangeYear(e) {\n      this.setState({\n        year: e.target.value\n      });\n    }\n  }, {\n    key: \"onChangeMonth\",\n    value: function onChangeMonth(e) {\n      this.setState({\n        month: e.target.value\n      });\n    }\n  }, {\n    key: \"handleClose\",\n    value: function handleClose() {\n      this.setState({\n        show: false\n      });\n    }\n  }, {\n    key: \"handleShow\",\n    value: function handleShow() {\n      this.setState({\n        show: true\n      });\n    }\n  }, {\n    key: \"onChangeMoney\",\n    value: function onChangeMoney(e) {\n      var allMoney_sum, stateAllMoney;\n      var form_value = e.target.value;\n\n      if (form_value.match(/^[0-9]*$/) != form_value) {\n        this.handleShow();\n      } else {\n        if (e.target.getAttribute(\"placeholder\") == \"\") {\n          allMoney_sum = Number(e.target.value) + this.state.allMoney;\n          e.target.setAttribute(\"placeholder\", e.target.value);\n        } else if (e.target.getAttribute(\"placeholder\") !== e.target.value) {\n          stateAllMoney = this.state.allMoney - Number(e.target.getAttribute(\"placeholder\"));\n          allMoney_sum = Number(e.target.value) + stateAllMoney;\n          e.target.setAttribute(\"placeholder\", e.target.value);\n        }\n\n        this.setState({\n          allMoney: allMoney_sum\n        });\n      }\n    }\n  }, {\n    key: \"targetSum\",\n    value: function targetSum() {\n      // idでhtmlからtableの要素を取得し、trタグのNodeListを取得\n      var table = document.getElementById('traffic-table');\n      var tbl_tr = table.querySelectorAll('tr');\n      var year = this.state.year;\n      var month = this.state.month;\n      var userid = this.props.userid; // テーブルの1行(trタグ)毎に処理\n\n      tbl_tr.forEach(function (tr) {\n        // tdタグのNodeListを取得\n        var cells = tr.querySelectorAll('td'); // firebaseの更新先設定 \n\n        var number = cells[0].firstElementChild.value;\n\n        if (number === \"\") {\n          return;\n        }\n\n        ;\n        var rowNumber = (\"00\" + tr.rowIndex).slice(-2); // firebaseにアクセス \n\n        var db = firebase.database();\n        var ref = db.ref('t_traffic_in/' + userid + '/' + year + '/' + month + '/' + rowNumber);\n        ref.set({\n          day: number,\n          // 日\n          purpose: cells[1].firstElementChild.value,\n          // 目的\n          vehicle: cells[2].firstElementChild.value,\n          // 乗り物\n          departure_and_arrival: cells[3].firstElementChild.value,\n          // 発～(経由)～着\n          one_way: cells[4].firstElementChild.value,\n          // 片往\n          amount_of_money: cells[5].firstElementChild.value // 金額\n\n        });\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var today = new Date();\n      var yearAgo = today.getFullYear() - 1;\n      var yearThis = today.getFullYear();\n      var yearLater = today.getFullYear() + 1;\n      var result = [];\n      var row = 15;\n\n      for (var i = 1; i <= row; i++) {\n        var number = (\"00\" + i).slice(-2);\n\n        var _ref = this.state.data[number] !== undefined ? this.state.data[number] : \"\",\n            day = _ref.day,\n            purpose = _ref.purpose,\n            vehicle = _ref.vehicle,\n            departure_and_arrival = _ref.departure_and_arrival,\n            one_way = _ref.one_way,\n            amount_of_money = _ref.amount_of_money;\n\n        result.push( /*#__PURE__*/_jsxDEV(\"tr\", {\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              className: \"traffic-day\",\n              type: \"text\",\n              placeholder: \"\",\n              defaultValue: day\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 159,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              className: \"traffic-text\",\n              type: \"text\",\n              placeholder: \"\",\n              defaultValue: purpose\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 162,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 161,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              className: \"table-from\",\n              as: \"select\",\n              value: vehicle,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\\u96FB\\u8ECA\",\n                children: \"\\u96FB\\u8ECA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 167,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\\u30D0\\u30B9\",\n                children: \"\\u30D0\\u30B9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 168,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\\u81EA\\u8EE2\\u8ECA\",\n                children: \"\\u81EA\\u8EE2\\u8ECA\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 169,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              className: \"traffic-text\",\n              type: \"text\",\n              placeholder: \"\",\n              defaultValue: departure_and_arrival\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              className: \"table-from\",\n              as: \"select\",\n              defaultValue: one_way,\n              children: [/*#__PURE__*/_jsxDEV(\"option\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\\u7247\\u9053\",\n                children: \"\\u7247\\u9053\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 178,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                value: \"\\u5F80\\u5FA9\",\n                children: \"\\u5F80\\u5FA9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 179,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            children: /*#__PURE__*/_jsxDEV(Form.Control, {\n              className: \"traffic-money\",\n              type: \"text\",\n              placeholder: \"\",\n              onChange: this.onChangeMoney,\n              defaultValue: amount_of_money\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 17\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 25\n        }, this));\n      }\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        \"class\": \"children-box\",\n        children: [/*#__PURE__*/_jsxDEV(Container, {\n          children: /*#__PURE__*/_jsxDEV(Row, {\n            className: \"monthly-input\",\n            children: [/*#__PURE__*/_jsxDEV(Col, {\n              md: \"auto\",\n              children: \"\\u5BFE\\u8C61\\u5E74\\u6708\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              md: \"auto\",\n              children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                as: \"select\",\n                defaultValue: yearThis,\n                onChange: this.onChangeYear,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  children: yearAgo\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: yearThis\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  children: yearLater\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 192,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              md: \"auto\",\n              children: \"\\u5E74\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              md: \"auto\",\n              children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                as: \"select\",\n                defaultValue: this.state.month,\n                onChange: this.onChangeMonth,\n                children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"1\",\n                  children: \"1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"2\",\n                  children: \"2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"3\",\n                  children: \"3\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 204,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"4\",\n                  children: \"4\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 205,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"5\",\n                  children: \"5\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"6\",\n                  children: \"6\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"7\",\n                  children: \"7\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 208,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"8\",\n                  children: \"8\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 209,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"9\",\n                  children: \"9\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"10\",\n                  children: \"10\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 211,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"11\",\n                  children: \"11\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 29\n                }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                  value: \"12\",\n                  children: \"12\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 213,\n                  columnNumber: 29\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 25\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 200,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              md: \"auto\",\n              children: \"\\u6708\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 216,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              md: {\n                span: \"auto\",\n                offset: 2\n              },\n              children: \"\\u5408\\u8A08\\u91D1\\u984D\\uFF1A\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 217,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              md: \"auto\",\n              children: [this.state.allMoney, \"\\u3000\\u5186\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(Col, {\n              md: \"auto\",\n              children: [/*#__PURE__*/_jsxDEV(Button, {\n                variant: \"secondary\",\n                children: \"\\u524D\\u6708\\u5F15\\u7D99\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 220,\n                columnNumber: 25\n              }, this), ' ']\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 219,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Table, {\n          className: \"table-all\",\n          bordered: true,\n          size: \"sm\",\n          children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n            className: \"traffic-header\",\n            children: /*#__PURE__*/_jsxDEV(\"tr\", {\n              children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u65E5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 228,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u76EE\\u7684\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u4E57\\u308A\\u7269\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u767A \\uFF5E (\\u7D4C\\u7531) \\uFF5E \\u7740\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 231,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u7247\\u5F80\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 232,\n                columnNumber: 25\n              }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                children: \"\\u91D1\\u984D\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 233,\n                columnNumber: 25\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 227,\n              columnNumber: 21\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n            id: \"traffic-table\",\n            children: result\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"javascript:void(0)\",\n          \"class\": \"btn btn--orange btn--circle btn--circle-a btn--shadow\",\n          onClick: this.targetSum,\n          children: \"\\u4FDD\\u5B58\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Modal, {\n          centered: true,\n          show: this.state.show,\n          onHide: this.handleClose,\n          children: [/*#__PURE__*/_jsxDEV(Modal.Body, {\n            children: \"\\u534A\\u89D2\\u6570\\u5024\\u306E\\u307F\\u5165\\u529B\\u3057\\u3066\\u304F\\u3060\\u3055\\u3044\\u3002\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 16\n          }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n            children: /*#__PURE__*/_jsxDEV(Button, {\n              variant: \"secondary\",\n              onClick: this.handleClose,\n              children: \"Close\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 244,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }, this);\n    }\n  }]);\n\n  return Traffic;\n}(Component);\n\nTraffic = connect(function (state) {\n  return state;\n})(Traffic);\nexport default Traffic;","map":{"version":3,"sources":["C:/Users/NagatsuYuhei/next_app/components/Traffic.js"],"names":["React","Component","Container","Row","Col","Form","Button","Table","Modal","connect","firebase","Traffic","props","today","Date","year","getFullYear","day","getMonth","state","show","month","allMoney","data","getFireData","onChangeYear","bind","onChangeMonth","onChangeMoney","handleShow","handleClose","targetSum","db","database","ref","userid","self","on","snapshot","val","setState","e","target","value","allMoney_sum","stateAllMoney","form_value","match","getAttribute","Number","setAttribute","table","document","getElementById","tbl_tr","querySelectorAll","forEach","tr","cells","number","firstElementChild","rowNumber","rowIndex","slice","set","purpose","vehicle","departure_and_arrival","one_way","amount_of_money","yearAgo","yearThis","yearLater","result","row","i","undefined","push","span","offset"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Container, Row, Col, Form, Button, Table, Modal } from 'react-bootstrap';\r\nimport { connect } from 'react-redux';\r\nimport firebase from \"firebase\";\r\nimport \"firebase/database\";\r\n\r\nclass Traffic extends Component {\r\n\r\n    constructor (props) {\r\n        super(props);\r\n        let today = new Date();\r\n        let year = today.getFullYear();\r\n        let day = today.getMonth() + 1;\r\n        this.state = {\r\n            show: false,\r\n            year: year,\r\n            month: day,\r\n            allMoney: 0,\r\n            data: [],\r\n        };\r\n\r\n        this.getFireData ();\r\n\r\n        this.onChangeYear = this.onChangeYear.bind(this);\r\n        this.onChangeMonth = this.onChangeMonth.bind(this);\r\n        this.onChangeMoney = this.onChangeMoney.bind(this);\r\n        this.handleShow = this.handleShow.bind(this);\r\n        this.handleClose = this.handleClose.bind(this);\r\n        this.targetSum = this.targetSum.bind(this);\r\n    }\r\n\r\n    getFireData () {\r\n        // firebaseにアクセス \r\n        let db = firebase.database();\r\n        let ref = db.ref('t_traffic_in/' + this.props.userid + '/' + this.state.year + '/' + this.state.month + '/'  );\r\n        let self = this;\r\n        \r\n        ref.on('value', (snapshot) => {\r\n            if (snapshot.val() != null){\r\n\r\n                self.setState({ data: snapshot.val() });\r\n            \r\n            }\r\n        });        \r\n    }\r\n\r\n    onChangeYear (e) {\r\n        this.setState ({\r\n            year: e.target.value\r\n        });\r\n    }\r\n\r\n    onChangeMonth (e) {\r\n        this.setState ({\r\n            month: e.target.value\r\n        });\r\n    }\r\n    handleClose() {\r\n        this.setState({\r\n            show:false\r\n        });\r\n    }\r\n    handleShow() {\r\n        this.setState({\r\n            show:true\r\n        });\r\n    }\r\n\r\n    onChangeMoney (e) {\r\n\r\n        let allMoney_sum, stateAllMoney;\r\n        let form_value = e.target.value;\r\n        \r\n        if (form_value.match(/^[0-9]*$/) != form_value ) {\r\n\r\n            this.handleShow();\r\n\r\n        } else {\r\n\r\n            if (e.target.getAttribute(\"placeholder\") == \"\") {\r\n\r\n                allMoney_sum = Number(e.target.value) + this.state.allMoney;\r\n                e.target.setAttribute(\"placeholder\", e.target.value);\r\n    \r\n            } else if (e.target.getAttribute(\"placeholder\")  !== e.target.value) {\r\n    \r\n                stateAllMoney = this.state.allMoney - Number(e.target.getAttribute(\"placeholder\"));\r\n                allMoney_sum = Number(e.target.value) + stateAllMoney;\r\n                e.target.setAttribute(\"placeholder\", e.target.value);\r\n    \r\n            } \r\n             \r\n            this.setState ({\r\n                allMoney: allMoney_sum\r\n            });\r\n    \r\n        }\r\n\r\n    }\r\n\r\n    targetSum () {\r\n        // idでhtmlからtableの要素を取得し、trタグのNodeListを取得\r\n        let table = document.getElementById('traffic-table');\r\n        let tbl_tr = table.querySelectorAll('tr');\r\n\r\n        let year = this.state.year;\r\n        let month = this.state.month;\r\n        let userid = this.props.userid;\r\n\r\n        // テーブルの1行(trタグ)毎に処理\r\n        tbl_tr.forEach(function (tr) {\r\n            // tdタグのNodeListを取得\r\n            let cells = tr.querySelectorAll('td');\r\n            // firebaseの更新先設定 \r\n            let number = cells[0].firstElementChild.value;\r\n\r\n            if ( number === \"\" ) { return };\r\n\r\n            let rowNumber = (\"00\" + tr.rowIndex).slice(-2);\r\n            // firebaseにアクセス \r\n            let db = firebase.database();\r\n            let ref = db.ref('t_traffic_in/' + userid + '/' + year + '/' + month + '/' + rowNumber );\r\n\r\n            ref.set({\r\n                day                   : number,                            // 日\r\n                purpose               : cells[1].firstElementChild.value,　// 目的\r\n                vehicle               : cells[2].firstElementChild.value,  // 乗り物\r\n                departure_and_arrival : cells[3].firstElementChild.value,  // 発～(経由)～着\r\n                one_way               : cells[4].firstElementChild.value,  // 片往\r\n                amount_of_money       : cells[5].firstElementChild.value   // 金額\r\n            });\r\n        });\r\n    }\r\n\r\n    render () {\r\n\r\n        let today = new Date();\r\n        let yearAgo = today.getFullYear()-1;\r\n        let yearThis = today.getFullYear();\r\n        let yearLater = today.getFullYear()+1;\r\n\r\n        let result = [];\r\n        let row = 15;\r\n\r\n        for (let i=1; i<=row; i++) {\r\n\r\n            let number = (\"00\" + i).slice(-2);\r\n\r\n            let {   day\r\n                  , purpose\r\n                  , vehicle\r\n                  , departure_and_arrival\r\n                  , one_way\r\n                  , amount_of_money\r\n                } = this.state.data[number] !== undefined ? this.state.data[number] : \"\";\r\n\r\n            result.push(<tr　key={i}>\r\n                <td>\r\n                    <Form.Control className=\"traffic-day\" type=\"text\" placeholder=\"\" defaultValue= {day} />\r\n                </td>\r\n                <td>\r\n                    <Form.Control className=\"traffic-text\" type=\"text\" placeholder=\"\" defaultValue= {purpose} />\r\n                </td>\r\n                <td>\r\n                    <Form.Control className=\"table-from\" as=\"select\" value= {vehicle} >\r\n                        <option ></option>\r\n                        <option value=\"電車\" >電車</option>\r\n                        <option value=\"バス\" >バス</option>\r\n                        <option value=\"自転車\" >自転車</option>\r\n                    </Form.Control>\r\n                </td>\r\n                <td>\r\n                    <Form.Control className=\"traffic-text\" type=\"text\" placeholder=\"\" defaultValue= {departure_and_arrival} />\r\n                </td>\r\n                <td>\r\n                    <Form.Control className=\"table-from\" as=\"select\" defaultValue= {one_way} >\r\n                        <option ></option>\r\n                        <option value=\"片道\" >片道</option>\r\n                        <option value=\"往復\" >往復</option>\r\n                    </Form.Control>\r\n                </td>\r\n                <td>\r\n                    <Form.Control className=\"traffic-money\" type=\"text\" placeholder=\"\" onChange={ this.onChangeMoney } defaultValue= {amount_of_money} />\r\n                </td>\r\n            </tr>);\r\n        }\r\n\r\n        return (<div class=\"children-box\">\r\n            <Container>\r\n                <Row className=\"monthly-input\">\r\n                    <Col md=\"auto\">対象年月</Col>\r\n                    <Col md=\"auto\">\r\n                        <Form.Control as=\"select\" defaultValue={ yearThis } onChange={ this.onChangeYear }>\r\n                            <option>{ yearAgo }</option>\r\n                            <option>{ yearThis }</option>\r\n                            <option>{ yearLater }</option>\r\n                        </Form.Control>\r\n                    </Col>\r\n                    <Col md=\"auto\">年</Col>\r\n                    <Col md=\"auto\">\r\n                        <Form.Control as=\"select\" defaultValue={ this.state.month } onChange={ this.onChangeMonth }>\r\n                            <option value=\"1\">1</option>\r\n                            <option value=\"2\">2</option>\r\n                            <option value=\"3\">3</option>\r\n                            <option value=\"4\">4</option>\r\n                            <option value=\"5\">5</option>\r\n                            <option value=\"6\">6</option>\r\n                            <option value=\"7\">7</option>\r\n                            <option value=\"8\">8</option>\r\n                            <option value=\"9\">9</option>\r\n                            <option value=\"10\">10</option>\r\n                            <option value=\"11\">11</option>\r\n                            <option value=\"12\">12</option>\r\n                        </Form.Control>\r\n                    </Col>\r\n                    <Col md=\"auto\">月</Col>\r\n                    <Col md={{ span: \"auto\", offset: 2 }}>合計金額：</Col>\r\n                    <Col md=\"auto\">{ this.state.allMoney }　円</Col>\r\n                    <Col md=\"auto\">\r\n                        <Button variant=\"secondary\">前月引継</Button>{' '}\r\n                    </Col>\r\n                </Row>\r\n            </Container>\r\n            <br/>\r\n            <Table className=\"table-all\" bordered size=\"sm\">\r\n                <thead className=\"traffic-header\">\r\n                    <tr>\r\n                        <th>日</th>\r\n                        <th>目的</th>\r\n                        <th>乗り物</th>\r\n                        <th>発 ～ (経由) ～ 着</th>\r\n                        <th>片往</th>\r\n                        <th>金額</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody id=\"traffic-table\" >{result}</tbody>\r\n            </Table>\r\n            <a href=\"javascript:void(0)\" class=\"btn btn--orange btn--circle btn--circle-a btn--shadow\" onClick={this.targetSum}>保存</a>\r\n            <Modal centered show={this.state.show} onHide={this.handleClose}>\r\n               <Modal.Body>\r\n                   半角数値のみ入力してください。\r\n               </Modal.Body>\r\n            <Modal.Footer>\r\n                <Button variant=\"secondary\" onClick={this.handleClose}>\r\n                    Close\r\n                </Button>\r\n            </Modal.Footer>\r\n           </Modal>\r\n        </div>);\r\n    }\r\n}\r\n\r\nTraffic = connect((state) => state)(Traffic);\r\nexport default Traffic;"]},"metadata":{},"sourceType":"module"}